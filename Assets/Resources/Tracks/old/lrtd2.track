<?xml version="1.0" encoding="utf-8"?>
<track type="plane" u="5">

  <boundary>
    <vertex q1="-1" q2="-110"/>
    <vertex q1="-1" q2="110"/>
    <vertex q1="1" q2="110"/>
    <vertex q1="1" q2="-110"/>
  </boundary>

  <groundPolygon material="track3.png">
    <vertex q1="-5" q2="-115"/>
	<vertex q1="5" q2="-115"/>
	<vertex q1="5" q2="115"/>
    <vertex q1="-5" q2="115"/>    	    
  </groundPolygon>  
  
  <conditionalcounter name="trial_counter" min="16" max="30" multiple="1" reset="31">
	<trigger target="blackout_zone_1" />
	<trigger target="blackout_zone_2" />
  </conditionalcounter>
  
  <bgcolor r="0.2" g="0.2" b="0.2" />

  <dispensers>
    <blackoutdispenser name="blackoutDispenser" maxTime="5000"/>
    <audiodispenser name="rewardToneDispenser">
      <sound name="reward" file="reward1.wav" gain="10.0" maxdistance="100" height="5" />
    </audiodispenser>
    <audiodispenser name="failureToneDispenser">
      <sound name="failure" file="white_noise.wav" gain="10.0" maxdistance="100" height="5" />
    </audiodispenser>
    <DiscreTeleportDispenser name="teleportDispenser1" sequential="false" delay="500">
      <destination>
        <position q1="0" q2="105"/>
        <direction q1="0" q2="-1"/>
      </destination>
      <trigger target="Well2" />
    </DiscreTeleportDispenser>	
    <DiscreTeleportDispenser name="teleportDispenser2" sequential="false" delay="500">
      <destination>
        <position q1="0" q2="-105"/>
        <direction q1="0" q2="1"/>
      </destination>
      <trigger target="Well1" />
    </DiscreTeleportDispenser>		
    <rewarddispenser name="autoReward" initialDelay="500" delay="400" duration="200" burstCount="5"/>
  </dispensers>

  <positions>

    <position q1="0" q2="-100">
      <avatar height="0">
        <direction q1="0" q2="1" />
      </avatar>
    </position>
    
    <!--   Walls   -->

    <position q1="-150" q2="0">
      <plane name="LeftWall" height="100" material="line4.png">
        <facing x="1" y="0" z="0"/>
        <scale x="300" y="1" z="300"/>
      </plane>            
    </position>

    <position q1="150" q2="0">
      <plane name="RightWall" height="100" material="Twist2.png">
        <facing x="-1" y="0" z="0"/>
        <scale x="300" y="1" z="300"/>
      </plane>
    </position>

    <position q1="0" q2="-150">
      <plane name="BackWall" height="100" material="flower1.png">
        <facing x="0" y="0" z="1"/>
        <scale x="300" y="1" z="300"/>
      </plane>
    </position>

    <position q1="0" q2="150">
      <plane name="FrontWall" height="100" material="target.png">
        <facing x="0" y="0" z="-1"/>
        <scale x="300" y="1" z="300"/>
      </plane>
    </position>
    
    <!-- Lower floor -->

    <position q1="0" q2="0">
      <plane name="LowerFloor" height="-50" material="checkered2.png">
        <facing x="0" y="-1" z="0"/>
        <scale x="300" y="1" z="300"/>
      </plane>
    </position>
    <!--//////////////////////////////////////////////////////////////////////////-->


    <position q1="0" q2="100">
	  <well name="Well1" capacity="5" initialDelay="500" pulseDelay="400" pulseWidth="200">
        <radialboundary radius="15"/>
		<pillar height="50" />
        <radialTriggerZoneMesh radius="15" material="plain_teal.png" />
        <trigger target="teleportDispenser1" />  
      </well>
    </position>		
    
	  <position q1="0" q2="-100">
	    <well name="Well2" capacity="5" initialDelay="500" pulseDelay="400" pulseWidth="200" level="0">
          <radialboundary radius="15"/>
		      <pillar height="50" />
          <radialTriggerZoneMesh radius="15" material="plain_teal.png" />
          <trigger target="teleportDispenser2" />
		  <trigger target="trial_counter" />				  
      </well>
    </position>

    <position q1="0" q2="0">
      <occupationzone name="blackout_zone_1" active="false">
        <polygonboundary>
          <vertex q1="-5" q2="-60"/>
          <vertex q1="-5" q2="-20"/>
          <vertex q1="5" q2="-20"/>
          <vertex q1="5" q2="-60"/>
        </polygonboundary>

        <onentry>
          <trigger target="blackoutDispenser" enabled="true"/>
        </onentry>
        <onexit>
          <trigger target="blackoutDispenser" enabled="false"/>
        </onexit>
      </occupationzone>
	  
      <occupationzone name="blackout_zone_2" active="false">
        <polygonboundary>
          <vertex q1="-5" q2="20"/>
          <vertex q1="-5" q2="60"/>
          <vertex q1="5" q2="60"/>
          <vertex q1="5" q2="20"/>
        </polygonboundary>

        <onentry>
          <trigger target="blackoutDispenser" enabled="true"/>
        </onentry>
        <onexit>
          <trigger target="blackoutDispenser" enabled="false"/>
        </onexit>
      </occupationzone>	  
    </position>

  </positions>

</track>
